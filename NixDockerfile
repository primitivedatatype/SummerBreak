FROM nixos/nix

ENV NIX_PATH nixpkgs=channel:nixos-22.11
RUN nix-channel --update

# https://nixos.org/manual/nix/stable/command-ref/nix-env/install.html
RUN nix-env -iA nixpkgs.python311 

COPY default.nix default.nix

RUN nix-build

ENV PATH="./result/bin/:$PATH"

COPY app app

COPY app/tests app/tests



